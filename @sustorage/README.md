Это не полная документация по проектам, а просто
мои мысли. Как было сказано ранее, если вам не интересно
наблюдать за попытками сделать BolgenOS таким, каким его
видел Попов, то лучше игнорируйте это.

# `sustorage` & `sustoraged`

Каждый раз, как я ставлю дебиан, первое что я делаю, это
пишу `sudo su` с предсказуемым результатом `command not found: sudo`.
И каждый раз я такой: "_Ляяяя, а чёб не юзать `sudo`, а всё
делать через su_". Впринципе так я и решил сделать suapt, ибо
писать `su -c 'apt install task-p0rn'` мне надоело. Далее возникла
проблема с тем, что лень вводить пароль от рута. Так и я решил
сделать это. `sustoraged` — сервер, у коготоро его сокет, по которому
нужно обращаться, что бы получить пароль. `sustorage` — утилита, которая
это и делает собственно. Идея сама по себе не очень. Это кстати
должно работать как протокол, то есть `sustoraged` и `sustorage` могут
быть чем угодно. Так, если нечем заняться, можно использовать
`sustorage-provider-doas` как `sustorage` и с ним `suapt` будет работать.
Для теста решил реализовать пока только сделать `sustoraged`, который
хранит пороль только от рута. `sustorage` тоже кидает ошибку, если
выбран не рут. Вроде как реализовал `sustoraged`, но была проблема с
клиентом: нужно было как-то передать пароль в `su`, да ещё и ввод
оставить. Не получилось, угу... Дальше будет просто некоторые доки по
проектам с моими комментариями.

## `sustoraged-rootonly`

Сервер, сказано выше, хранит только пароль рута. Кратко про то, как
должен был работать любой сервер: Ты кидаешь ему символ, он в ответ
чёто делает

* `v` — получить версию, сервер возращает `1`
* `u[пользователь]` — получить пароль от пользователя
* `p[пароль]` — задаёт пароль пользователю.

Шутка-минутка: если пароль есть, то сервер завершает запрос. Ответ на
вопрос "Как изменить пароль?": Никак... 

Закрывая глаза на безопасность, я хотел потом реализовать забывание
пароля через время, но...

Ах да, сокет вроде `/run/sustorage.socket`, но можно первым аргуметом
передать свой.

## `sustorage-lite:rootonly`

Я хз чё его так назвал. Написан он на баше, но работать с сокетами
на нём не удалось, поэтому нужен ещё си. Тут главная проблема: нельзя
передать пароль. А так, вот его команды:

* `_opts` — все команды
* `version` — версия протокола
* `revision` — строка версии самой проги
* `prompt [пользователь] [команда]` — если пароля нет, спросит
* `run` — тоже, что и `prompt`, только если пароля нет, кинет ошибку

## `sustorage-provider-doas`

Ничего не получилось с прошлой прогой, поэтому решил чисто для теста
сделать всё тоже самое, только через `doas`. После этого добавил
поддержку `doas` и `sudo` в `suapt`.

Почитайте выше, чё может `sustorage`, тут это просто всё через `doas`.


